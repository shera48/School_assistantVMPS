<!DOCTYPE html>
<html lang="en">
<head>
        <!-- [Previous head content remains exactly the same] -->
        <!-- ... -->
</head>
<body>
        <div class="container">
                <!-- [Previous HTML content remains exactly the same until the status div] -->

                <div class="status" id="status"></div>
                <div id="httpsWarning" style="display: none; background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; color: #856404; border-left: 4px solid #ffeeba;">
                        <p><strong>Note:</strong> For full voice functionality, please access this page via:</p>
                        <ul>
                                <li>HTTPS (secure connection)</li>
                                <li>localhost (for development)</li>
                        </ul>
                        <p>You can still type your questions below.</p>
                </div>

                <!-- [Rest of the HTML content remains exactly the same] -->
                <!-- ... -->
        </div>

        <script>
                // [Previous responses object remains exactly the same]
                // ...

                // DOM elements - add the new warning element
                const httpsWarning = document.getElementById('httpsWarning');
                // [Other DOM elements remain the same]
                // ...

                // Initialize the app - modified init function
                function init() {
                        createFrequencyLines();
                        setupEventListeners();

                        // Check if we're on HTTPS or localhost
                        const isSecureContext = window.location.protocol === 'https:' ||
                                                                    window.location.hostname === 'localhost' ||
                                                                    window.location.hostname === '127.0.0.1';

                        if (isSecureContext) {
                                // We're in a secure context, can request microphone
                                checkSpeechSupport();
                                checkMicrophonePermission();
                        } else {
                                // Show warning but still allow typing
                                httpsWarning.style.display = 'block';
                                speakBtn.disabled = true;
                                permissionBtn.disabled = true;
                                permissionBtn.style.display = 'none';
                                statusElement.textContent = "Type your questions below (voice input requires HTTPS)";
                        }
                }

                // [Rest of the JavaScript remains the same until the checkSpeechSupport function]

                // Modified checkSpeechSupport function
                function checkSpeechSupport() {
                        if (!SpeechRecognition) {
                                statusElement.textContent = "Speech recognition not supported in your browser.";
                                speakBtn.disabled = true;
                                permissionBtn.disabled = true;
                                return false;
                        }
                        return true;
                }

                // [Rest of the JavaScript remains exactly the same]
                // ...
        </script>
</body>
</html>